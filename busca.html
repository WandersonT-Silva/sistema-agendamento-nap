
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busca - Sistema NAP</title>
    <link rel="icon" type="image/png" sizes="32x32" href="logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href=""logo.png">
    <style>
        /* ===== TEMA ESCOLA - SANTO ANTÔNIO ===== */
        :root {
            /* Cores oficiais da escola */
            --dourado: #D4AF37;         /* Dourado clássico */
            --laranja: #FF6B35;         /* Laranja vibrante */
            --azul-marinho: #1E3A8A;    /* Azul marinho */
            --branco: #FFFFFF;          /* Branco */
            --cinza-claro: #F8FAFC;     /* Cinza muito claro */
            --cinza-medio: #6B7280;     /* Cinza médio */
            --cinza-escuro: #1F2937;    /* Cinza escuro */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--cinza-claro) 0%, #e2e8f0 100%);
            min-height: 100vh;
            color: var(--cinza-escuro);
        }

        /* ===== CABEÇALHO SIMPLIFICADO ===== */
        .header {
            position: relative;
            height: 80px;
            background: var(--azul-marinho);
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);
        }

        .header-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--azul-marinho);
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 30px;
            height: 100%;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo {
            height: 50px;
            width: auto;
            filter: brightness(0) invert(1);
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        /* ===== LAYOUT PRINCIPAL ===== */
        .main-layout {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* ===== MENU LATERAL SEM LOGO ===== */
        .sidebar {
            width: 90px;
            background: var(--branco);
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
            display: flex;
            flex-direction: column;
        }

        .menu-nav {
            list-style: none;
            padding: 20px 0;
            flex: 1;
        }

        .menu-item {
            position: relative;
            padding: 18px 0;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            margin: 5px 0;
        }

        .menu-item:hover {
            background: var(--cinza-claro);
            border-left-color: var(--laranja);
        }

        .menu-item.active {
            background: var(--azul-marinho);
            border-left-color: var(--dourado);
        }

        .menu-item.active .menu-icon {
            color: var(--branco);
            transform: scale(1.1);
        }

        .menu-item.active .menu-text {
            color: var(--branco);
            font-weight: 600;
        }

        .menu-icon {
            font-size: 22px;
            display: block;
            margin-bottom: 6px;
            color: var(--cinza-medio);
            transition: all 0.3s ease;
        }

        .menu-text {
            font-size: 11px;
            color: var(--cinza-medio);
            font-weight: 500;
            line-height: 1.2;
        }

        .menu-tooltip {
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            background: var(--azul-marinho);
            color: var(--branco);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            margin-left: 15px;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);
            border: 1px solid var(--dourado);
        }

        .menu-tooltip::before {
            content: '';
            position: absolute;
            right: 100%;
            top: 50%;
            transform: translateY(-50%);
            border: 6px solid transparent;
            border-right-color: var(--azul-marinho);
        }

        .menu-item:hover .menu-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* ===== CONTEÚDO PRINCIPAL ===== */
        .content {
            flex: 1;
            padding: 30px;
            background: var(--cinza-claro);
            overflow-y: auto;
        }

        .busca-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* ===== PAINEL DE FILTROS ===== */
        .filtros-panel {
            background: var(--branco);
            border: 2px solid var(--azul-marinho);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .filtro-group {
            display: flex;
            align-items: flex-end;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex: 1;
            min-width: 200px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--azul-marinho);
            font-size: 14px;
        }

        .filtro-item select {
            padding: 12px 15px;
            border: 2px solid var(--cinza-claro);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: var(--branco);
            font-family: inherit;
        }

        .filtro-item select:focus {
            outline: none;
            border-color: var(--azul-marinho);
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }

        .filtro-item select:disabled {
            border-color: var(--cinza-medio);
            background: var(--cinza-claro);
            color: var(--cinza-medio);
        }

        .btn-filtro {
            background: linear-gradient(135deg, var(--azul-marinho) 0%, var(--laranja) 100%);
            color: var(--branco);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);
            min-width: 150px;
            height: 46px;
        }

        .btn-filtro:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 138, 0.4);
        }

        .btn-filtro.filtro-ativo {
            background: linear-gradient(135deg, var(--laranja) 0%, var(--dourado) 100%);
        }

        .busca-group {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .search-box {
            position: relative;
            flex: 1;
        }

        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid var(--cinza-claro);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: var(--branco);
            font-family: inherit;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--azul-marinho);
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: var(--cinza-medio);
        }

        /* ===== PAINEL DE RESULTADOS ===== */
        .resultados-panel {
            background: var(--branco);
            border: 2px solid var(--azul-marinho);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .galeria-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--dourado);
        }

        .galeria-header h3 {
            color: var(--azul-marinho);
            font-size: 20px;
            font-weight: 600;
        }

        .contador {
            color: var(--cinza-medio);
            font-size: 14px;
            font-weight: 600;
        }

        .estado-vazio {
            text-align: center;
            padding: 50px 20px;
            color: var(--cinza-medio);
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .icone-vazio {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .estado-vazio p {
            font-size: 16px;
            line-height: 1.5;
        }

        /* ===== GALERIA DE ALUNOS ===== */
        .galeria-alunos {
            display: flex;
            flex-direction: column;
            gap: 15px;
            flex: 1;
        }

        .aluno-item {
            display: flex;
            background: var(--branco);
            border: 2px solid var(--cinza-claro);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .aluno-item:hover {
            border-color: var(--azul-marinho);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .aluno-item.selecionado {
            border-color: var(--dourado);
            background: rgba(212, 175, 55, 0.05);
        }

        .aluno-item.selecionado::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--dourado);
        }

        .aluno-foto {
            width: 120px;
            height: 120px;
            background: var(--cinza-claro);
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--cinza-claro);
            flex-shrink: 0;
        }

        .foto-placeholder {
            font-size: 36px;
            color: var(--cinza-medio);
        }

        .aluno-info {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .aluno-nome {
            font-size: 18px;
            font-weight: 600;
            color: var(--azul-marinho);
            margin-bottom: 5px;
        }

        .aluno-local {
            font-size: 14px;
            color: var(--cinza-escuro);
            font-weight: 500;
        }

        .aluno-tipo-prova {
            font-size: 13px;
            color: var(--laranja);
            font-weight: 600;
        }

        .aluno-detalhes {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--cinza-claro);
        }

        .aluno-segmento, .aluno-turma {
            font-size: 12px;
            color: var(--cinza-medio);
            margin-bottom: 3px;
        }

        .separador-aluno {
            height: 8px;
            background: var(--branco);
            width: 100%;
        }

        /* ===== ESTADOS DOS FILTROS ===== */
        .filtro-ativo {
            border-color: var(--laranja) !important;
            background: rgba(255, 107, 53, 0.05) !important;
        }

        .filtro-desativado {
            border-color: var(--cinza-medio) !important;
            background: var(--cinza-claro) !important;
            color: var(--cinza-medio) !important;
        }

        /* ===== RESPONSIVO ===== */
        @media (max-width: 1024px) {
            .content {
                padding: 20px;
            }
            
            .filtro-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filtro-item {
                min-width: auto;
            }
            
            .busca-group {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .main-layout {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                flex-direction: row;
            }
            
            .menu-nav {
                display: flex;
                justify-content: space-around;
                padding: 10px 0;
                width: 100%;
            }
            
            .menu-item {
                padding: 10px 5px;
                border-left: none;
                border-bottom: 3px solid transparent;
                flex: 1;
            }
            
            .menu-item.active {
                border-left: none;
                border-bottom-color: var(--dourado);
            }
            
            .menu-tooltip {
                display: none;
            }
            
            .header-content {
                padding: 0 15px;
            }
            
            .logo {
                height: 40px;
            }
            
            .content {
                padding: 15px;
            }
            
            .aluno-item {
                flex-direction: column;
            }
            
            .aluno-foto {
                width: 100%;
                height: 100px;
                border-right: none;
                border-bottom: 1px solid var(--cinza-claro);
            }
            
            .galeria-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        /* ===== ANIMAÇÕES ===== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .resultados-panel {
            animation: fadeIn 0.6s ease-out;
        }

        .aluno-item {
            animation: fadeIn 0.4s ease-out;
        }
    </style>
</head>
<body>
    <div class="busca-container">
        <!-- Cabeçalho Simplificado -->
        <header class="header">
            <div class="header-background"></div>
            <div class="header-content">
                <div class="logo-container">
                    <img src="logo-santo-antonio.png" alt="Colégio Santo Antônio" class="logo">
                </div>
            </div>
        </header>

        <!-- Layout Principal -->
        <div class="main-layout">
            <!-- Menu Lateral SEM Logo -->
            <nav class="sidebar">
                <ul class="menu-nav">
                    <li class="menu-item" data-menu="1">
                        <span class="menu-icon">🏠</span>
                        <span class="menu-text">Início</span>
                        <span class="menu-tooltip">Página inicial</span>
                    </li>
                    <li class="menu-item" data-menu="2">
                        <span class="menu-icon">📅</span>
                        <span class="menu-text">Agendar</span>
                        <span class="menu-tooltip">Novo agendamento</span>
                    </li>
                    <li class="menu-item" data-menu="3">
                        <span class="menu-icon">✉️</span>
                        <span class="menu-text">Suporte</span>
                        <span class="menu-tooltip">Contato e suporte</span>
                    </li>
                    <li class="menu-item" data-menu="4">
                        <span class="menu-icon">📆</span>
                        <span class="menu-text">Calendário</span>
                        <span class="menu-tooltip">Visualizar calendário</span>
                    </li>
                    <li class="menu-item active" data-menu="5">
                        <span class="menu-icon">🔍</span>
                        <span class="menu-text">Buscar</span>
                        <span class="menu-tooltip">Busca por alunos</span>
                    </li>
                </ul>
            </nav>

            <!-- Conteúdo Principal -->
            <main class="content">
                <div class="busca-content">
                    <!-- Painel de Filtros -->
                    <div class="filtros-panel">
                        <div class="filtro-group">
                            <div class="filtro-item">
                                <label for="segmento-filtro">Segmento:</label>
                                <select id="segmento-filtro">
                                    <option value="##">##</option>
                                    <option value="Fundamental 1">Fundamental 1</option>
                                    <option value="Fundamental 2">Fundamental 2</option>
                                    <option value="Ensino Médio">Ensino Médio</option>
                                </select>
                            </div>

                            <div class="filtro-item">
                                <label for="turma-filtro">Turma:</label>
                                <select id="turma-filtro" disabled>
                                    <option value="##">##</option>
                                    <!-- Turmas serão carregadas dinamicamente -->
                                </select>
                            </div>

                            <button id="btn-aplicar-filtros" class="btn-filtro">
                                Aplicar Filtros
                            </button>
                        </div>

                        <div class="busca-group">
                            <div class="search-box">
                                <input type="text" id="input-busca" placeholder="Digite o nome do aluno...">
                                <span class="search-icon">🔍</span>
                            </div>
                        </div>
                    </div>

                    <!-- Galeria de Resultados -->
                    <div class="resultados-panel">
                        <div class="galeria-header">
                            <h3>Resultados da Busca</h3>
                            <span id="contador-resultados" class="contador">0 alunos encontrados</span>
                        </div>

                        <div id="estado-vazio" class="estado-vazio">
                            <div class="icone-vazio">👥</div>
                            <p id="mensagem-vazio">Digite um nome ou aplique filtros para buscar alunos</p>
                        </div>

                        <div id="galeria-alunos" class="galeria-alunos">
                            <!-- Alunos serão carregados via JavaScript -->
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        class BuscaManager {
            constructor() {
                this.textoBusca = '';
                this.segmentoSelecionado = '##';
                this.turmaSelecionada = '##';
                this.aplicarFiltros = false;
                this.alunoSelecionado = null;
                this.alunos = [];
                this.alunosFiltrados = [];
                
                this.turmasPorSegmento = {
                    'Fundamental 1': ['##', '1ºA', '1ºB', '1ºC', '1ºD', '1ºE', '2ºA', '2ºB', '2ºC', '2ºD', '2ºE', '3ºA', '3ºB', '3ºC', '3ºD', '3ºE', '4ºA', '4ºB', '4ºC', '4ºD', '4ºE', '5ºA', '5ºB', '5ºC', '5ºD', '5ºE'],
                    'Fundamental 2': ['##', '6ºA', '6ºB', '6ºC', '6ºD', '6ºE', '7ºA', '7ºB', '7ºC', '7ºD', '7ºE', '8ºA', '8ºB', '8ºC', '8ºD', '8ºE', '9ºA', '9ºB', '9ºC', '9ºD', '9ºE'],
                    'Ensino Médio': ['##', '1ºA', '1ºB', '1ºC', '1ºD', '1ºE', '2ºA', '2ºB', '2ºC', '2ºD', '2ºE', '3ºA', '3ºB', '3ºC', '3ºD', '3ºE']
                };
                
                this.init();
            }

            init() {
                this.checkAuthentication();
                this.setupEventListeners();
                this.setupMenuNavigation();
                this.carregarDadosAlunos();
                this.atualizarTurmas();
                this.renderizarResultados();
            }

            checkAuthentication() {
                const currentUser = localStorage.getItem('currentUser');
                if (!currentUser) {
                    window.location.href = 'index.html';
                    return;
                }
                this.usuarioLogado = JSON.parse(currentUser);
            }

            setupEventListeners() {
                // Navegação do menu
                document.addEventListener('click', (e) => {
                    const menuItem = e.target.closest('.menu-item');
                    if (menuItem) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const menuId = parseInt(menuItem.getAttribute('data-menu'));
                        this.navigateToMenu(menuId);
                        return false;
                    }
                });

                // Filtros
                document.getElementById('segmento-filtro').addEventListener('change', (e) => {
                    this.segmentoSelecionado = e.target.value;
                    this.atualizarTurmas();
                    this.aplicarFiltros = false;
                    this.atualizarEstadosFiltros();
                    this.renderizarResultados();
                });

                document.getElementById('turma-filtro').addEventListener('change', (e) => {
                    this.turmaSelecionada = e.target.value;
                    this.aplicarFiltros = false;
                    this.atualizarEstadosFiltros();
                    this.renderizarResultados();
                });

                document.getElementById('btn-aplicar-filtros').addEventListener('click', () => {
                    this.aplicarFiltros = true;
                    this.atualizarEstadosFiltros();
                    this.renderizarResultados();
                });

                // Busca por texto
                document.getElementById('input-busca').addEventListener('input', (e) => {
                    this.textoBusca = e.target.value.trim();
                    this.renderizarResultados();
                });

                // Enter para buscar
                document.getElementById('input-busca').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.renderizarResultados();
                    }
                });
            }

            setupMenuNavigation() {
                // Remove active de todos os itens
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Adiciona active ao item atual
                document.querySelector('[data-menu="5"]').classList.add('active');
            }

            navigateToMenu(menuId) {
                switch(menuId) {
                    case 1: // Dashboard
                        window.location.href = 'dashboard.html';
                        break;
                    case 2: // Agendamento
                        window.location.href = 'agendamento.html';
                        break;
                    case 3: // Suporte
                        window.location.href = 'suporte.html';
                        break;
                    case 4: // Calendário
                        window.location.href = 'calendario.html';
                        break;
                    case 5: // Busca (já estamos aqui)
                        break;
                }
            }

            carregarDadosAlunos() {
                // Simulação de dados de alunos
                this.alunos = [
                    {
                        id: 1,
                        nome: 'Ana Silva',
                        segmento: 'Fundamental 2',
                        turma: '6ºA',
                        localProva: 'Sala 101',
                        tipoProva: 'Prova Regular',
                        foto: null
                    },
                    {
                        id: 2,
                        nome: 'Bruno Oliveira',
                        segmento: 'Ensino Médio',
                        turma: '1ºA',
                        localProva: 'Sala 205',
                        tipoProva: 'Prova com Ajustes',
                        foto: null
                    },
                    {
                        id: 3,
                        nome: 'Carla Santos',
                        segmento: 'Fundamental 1',
                        turma: '4ºB',
                        localProva: 'Sala 302',
                        tipoProva: 'Prova com Calculadora',
                        foto: null
                    },
                    {
                        id: 4,
                        nome: 'Daniel Costa',
                        segmento: 'Fundamental 2',
                        turma: '8ºC',
                        localProva: 'Sala 104',
                        tipoProva: 'Prova com Consulta',
                        foto: null
                    },
                    {
                        id: 5,
                        nome: 'Eduarda Lima',
                        segmento: 'Ensino Médio',
                        turma: '2ºB',
                        localProva: 'Sala 208',
                        tipoProva: 'Prova Regular',
                        foto: null
                    },
                    {
                        id: 6,
                        nome: 'Felipe Rodrigues',
                        segmento: 'Fundamental 1',
                        turma: '3ºA',
                        localProva: 'Sala 301',
                        tipoProva: 'Prova em Dupla',
                        foto: null
                    }
                ];
            }

            atualizarTurmas() {
                const selectTurma = document.getElementById('turma-filtro');
                
                if (this.segmentoSelecionado === '##') {
                    selectTurma.innerHTML = '<option value="##">##</option>';
                    selectTurma.disabled = true;
                } else {
                    selectTurma.disabled = false;
                    selectTurma.innerHTML = '';
                    
                    const turmas = this.turmasPorSegmento[this.segmentoSelecionado] || [];
                    turmas.forEach(turma => {
                        const option = document.createElement('option');
                        option.value = turma;
                        option.textContent = turma;
                        selectTurma.appendChild(option);
                    });
                    
                    // Reseta a turma selecionada
                    this.turmaSelecionada = '##';
                    selectTurma.value = '##';
                }
            }

            atualizarEstadosFiltros() {
                const selectSegmento = document.getElementById('segmento-filtro');
                const selectTurma = document.getElementById('turma-filtro');
                const btnAplicar = document.getElementById('btn-aplicar-filtros');

                // Atualiza estado do segmento
                if (this.textoBusca) {
                    selectSegmento.classList.add('filtro-desativado');
                    selectSegmento.disabled = true;
                } else {
                    selectSegmento.classList.remove('filtro-desativado');
                    selectSegmento.disabled = false;
                }

                // Atualiza estado da turma
                if (this.textoBusca || this.segmentoSelecionado === '##') {
                    selectTurma.classList.add('filtro-desativado');
                    selectTurma.disabled = true;
                } else {
                    selectTurma.classList.remove('filtro-desativado');
                    selectTurma.disabled = false;
                }

                // Atualiza estado do botão aplicar
                if (this.aplicarFiltros) {
                    btnAplicar.classList.add('filtro-ativo');
                } else {
                    btnAplicar.classList.remove('filtro-ativo');
                }
            }

            filtrarAlunos() {
                let alunosFiltrados = [...this.alunos];

                // Filtro por texto de busca (tem prioridade)
                if (this.textoBusca) {
                    const termo = this.textoBusca.toLowerCase();
                    alunosFiltrados = alunosFiltrados.filter(aluno => 
                        aluno.nome.toLowerCase().includes(termo) ||
                        aluno.nome.toLowerCase().startsWith(termo)
                    );
                } 
                // Filtro por segmento/turma (quando não há busca por texto)
                else if (this.aplicarFiltros) {
                    if (this.segmentoSelecionado !== '##') {
                        alunosFiltrados = alunosFiltrados.filter(aluno => 
                            aluno.segmento === this.segmentoSelecionado
                        );
                    }

                    if (this.turmaSelecionada !== '##') {
                        alunosFiltrados = alunosFiltrados.filter(aluno => 
                            aluno.turma === this.turmaSelecionada
                        );
                    }
                }

                this.alunosFiltrados = alunosFiltrados;
            }

            renderizarResultados() {
                this.filtrarAlunos();
                this.atualizarEstadosFiltros();

                const galeria = document.getElementById('galeria-alunos');
                const estadoVazio = document.getElementById('estado-vazio');
                const mensagemVazio = document.getElementById('mensagem-vazio');
                const contador = document.getElementById('contador-resultados');

                galeria.innerHTML = '';

                // Atualiza contador
                contador.textContent = `${this.alunosFiltrados.length} aluno(s) encontrado(s)`;

                if (this.alunosFiltrados.length === 0) {
                    estadoVazio.style.display = 'flex';
                    
                    if (this.textoBusca) {
                        mensagemVazio.textContent = `Nenhum aluno encontrado para "${this.textoBusca}"`;
                    } else if (this.aplicarFiltros) {
                        mensagemVazio.textContent = 'Nenhum aluno encontrado com os filtros aplicados';
                    } else {
                        mensagemVazio.textContent = 'Digite um nome ou aplique filtros para buscar alunos';
                    }
                } else {
                    estadoVazio.style.display = 'none';
                    
                    this.alunosFiltrados.forEach(aluno => {
                        const alunoElemento = this.criarElementoAluno(aluno);
                        galeria.appendChild(alunoElemento);
                    });
                }
            }

            criarElementoAluno(aluno) {
                const alunoElemento = document.createElement('div');
                alunoElemento.className = 'aluno-item';
                
                if (this.alunoSelecionado && this.alunoSelecionado.id === aluno.id) {
                    alunoElemento.classList.add('selecionado');
                }

                alunoElemento.innerHTML = `
                    <div class="aluno-foto">
                        <div class="foto-placeholder">👤</div>
                    </div>
                    <div class="aluno-info">
                        <div class="aluno-nome">${aluno.nome}</div>
                        <div class="aluno-local">${aluno.localProva}</div>
                        <div class="aluno-tipo-prova">${aluno.tipoProva}</div>
                        <div class="aluno-detalhes">
                            <div class="aluno-segmento">Segmento: ${aluno.segmento}</div>
                            <div class="aluno-turma">Turma: ${aluno.turma}</div>
                        </div>
                    </div>
                    <div class="separador-aluno"></div>
                `;

                alunoElemento.addEventListener('click', () => {
                    this.selecionarAluno(aluno);
                });

                return alunoElemento;
            }

            selecionarAluno(aluno) {
                this.alunoSelecionado = aluno;
                this.renderizarResultados();
                
                // Aqui você pode adicionar lógica adicional quando um aluno é selecionado
                console.log('Aluno selecionado:', aluno);
                
                // Exemplo: mostrar detalhes do aluno em um modal ou painel lateral
                // this.mostrarDetalhesAluno(aluno);
            }

            mostrarDetalhesAluno(aluno) {
                // Implementação futura para mostrar detalhes do aluno
                alert(`Detalhes do aluno:\n\nNome: ${aluno.nome}\nSegmento: ${aluno.segmento}\nTurma: ${aluno.turma}\nLocal: ${aluno.localProva}\nTipo: ${aluno.tipoProva}`);
            }
        }

        // Verificação de autenticação global
        function requireAuth() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'index.html';
                return false;
            }
            return true;
        }

        // Inicializar quando a página carregar
        document.addEventListener('DOMContentLoaded', () => {
            if (!requireAuth()) return;
            new BuscaManager();
        });
    </script>
</body>

</html>
